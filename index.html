<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lune de Miel Japon & Philippines</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🌸</text></svg>">
    <style>
        :root {
            --primary: #e91e63;
            --secondary: #2196f3;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4caf50;
            --warning: #ff9800;
            --japan: #bc002d;
            --philippines: #0038a8;
            --arrow-japan: #ff6b6b;
            --arrow-philippines: #4dabf7;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: var(--dark);
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        /* Page d'accueil */
        #home-page {
            height: 100vh;
            background: linear-gradient(135deg, var(--japan) 0%, var(--philippines) 100%);
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 2rem;
            position: relative;
        }
        
        .home-content {
            max-width: 800px;
            z-index: 2;
        }
        
        h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            font-size: 1.5rem;
            opacity: 0.9;
            margin-bottom: 2rem;
        }
        
        .love-quote {
            font-size: 2rem;
            font-style: italic;
            margin: 2rem 0;
            color: rgba(255,255,255,0.9);
            text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
        }
        
        /* Compte à rebours */
        .countdown {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem auto;
            max-width: 600px;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .countdown-title {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            opacity: 0.9;
        }
        
        .countdown-timer {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
        }
        
        .countdown-item {
            text-align: center;
            min-width: 100px;
        }
        
        .countdown-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            font-weight: bold;
            margin: 0 auto 0.5rem;
            border: 2px solid rgba(255,255,255,0.3);
        }
        
        .countdown-label {
            font-size: 0.9rem;
            opacity: 0.8;
            text-transform: uppercase;
        }
        
        .enter-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.5);
            padding: 1rem 2rem;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 2rem;
            backdrop-filter: blur(10px);
        }
        
        .enter-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-3px);
        }
        
        /* Pages de contenu */
        #content-pages {
            display: none;
            min-height: 100vh;
        }
        
        /* Navigation */
        .nav-header {
            background: linear-gradient(135deg, var(--japan) 0%, var(--philippines) 100%);
            color: white;
            padding: 1rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .nav-title {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .menu-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            backdrop-filter: blur(10px);
            transition: background 0.3s ease;
        }
        
        .menu-btn:hover {
            background: rgba(255,255,255,0.3);
        }
        
        .nav-menu {
            position: fixed;
            top: 0;
            right: -300px;
            width: 300px;
            height: 100vh;
            background: white;
            box-shadow: -4px 0 12px rgba(0,0,0,0.1);
            transition: right 0.3s ease;
            z-index: 1000;
            padding: 2rem;
            overflow-y: auto;
        }
        
        .nav-menu.active {
            right: 0;
        }
        
        .menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #eee;
        }
        
        .close-menu {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark);
        }
        
        .menu-links {
            list-style: none;
        }
        
        .menu-links li {
            margin-bottom: 1rem;
        }
        
        .menu-link {
            display: block;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
            text-decoration: none;
            color: var(--dark);
            font-weight: 600;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        
        .menu-link:hover, .menu-link.active {
            background: var(--primary);
            color: white;
            border-left-color: var(--secondary);
        }
        
        .back-home {
            display: block;
            margin-top: 2rem;
            padding: 1rem;
            background: var(--secondary);
            color: white;
            text-align: center;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: background 0.3s ease;
        }
        
        .back-home:hover {
            background: #1976d2;
        }
        
        /* Contenu principal */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        .page-title {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: var(--primary);
            text-align: center;
        }
        
        .page-subtitle {
            font-size: 1.2rem;
            color: #666;
            text-align: center;
            margin-bottom: 2rem;
        }
        
        /* Styles communs aux pages */
        .dropdown-container {
            position: relative;
            width: 100%;
            margin-bottom: 2rem;
        }
        
        .day-dropdown, .city-dropdown {
            width: 100%;
            padding: 1rem;
            font-size: 1.1rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background-color: white;
            cursor: pointer;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 1.5rem;
            padding-right: 3rem;
        }
        
        .day-dropdown:focus, .city-dropdown:focus {
            outline: none;
            border-color: var(--secondary);
        }
        
        .day-details, .places-container {
            background: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            margin-bottom: 2rem;
        }
        
        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .date {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .location {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: #f0f7ff;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-weight: 600;
            color: var(--secondary);
        }
        
        .location a {
            color: var(--secondary);
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .location a:hover {
            text-decoration: underline;
        }
        
        .activities {
            margin-bottom: 2rem;
        }
        
        .activity {
            display: flex;
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .activity:last-child {
            margin-bottom: 0;
            border-bottom: none;
        }
        
        .time {
            min-width: 100px;
            font-weight: 600;
            color: var(--dark);
        }
        
        .activity-details {
            flex: 1;
        }
        
        .activity-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--dark);
        }
        
        .activity-desc {
            color: #666;
        }
        
        .place-link {
            color: var(--secondary);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            border-bottom: 1px dotted var(--secondary);
            display: inline-block;
            margin-top: 0.5rem;
        }
        
        .place-link:hover {
            color: var(--primary);
            text-decoration: none;
            border-bottom: 1px solid var(--primary);
        }
        
        .nearby-places {
            background: #f9f9f9;
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 2rem;
        }
        
        .nearby-title {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .places-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
        }
        
        .place-card {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: transform 0.3s ease;
        }
        
        .place-card:hover {
            transform: translateY(-5px);
        }
        
        .place-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--dark);
        }
        
        .place-name a {
            color: var(--dark);
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .place-name a:hover {
            color: var(--secondary);
            text-decoration: underline;
        }
        
        .place-desc {
            font-size: 0.9rem;
            color: #666;
        }
        
        .country-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .japan-badge {
            background-color: rgba(188, 0, 45, 0.1);
            color: var(--japan);
        }
        
        .philippines-badge {
            background-color: rgba(0, 56, 168, 0.1);
            color: var(--philippines);
        }
        
        .hotel-info {
            background: #fff8e1;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1.5rem;
            border-left: 4px solid #ffc107;
        }
        
        .hotel-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .map-icon {
            font-size: 1.2rem;
        }
        
        /* Styles pour la carte */
        #map {
            height: 600px;
            width: 100%;
            border-radius: 8px;
            margin-bottom: 1rem;
        }
        
        .map-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .map-btn {
            padding: 0.5rem 1rem;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .map-btn.active {
            background: var(--secondary);
            color: white;
            border-color: var(--secondary);
        }
        
        .map-btn:hover {
            background: #f0f0f0;
        }
        
        /* Styles pour le tableau des services hôteliers */
        .hotel-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        
        .hotel-table th, .hotel-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .hotel-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: var(--dark);
        }
        
        .hotel-table tr:hover {
            background-color: #f8f9fa;
        }
        
        .service-badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            background: #e9ecef;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .room-type {
            font-style: italic;
            color: #666;
            margin-top: 0.25rem;
            font-size: 0.9rem;
        }
        
        /* Légende de la carte */
        #map-legend {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
        }
        
        /* Styles pour le convertisseur de devises */
        .converter-container {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .converter-form {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 1rem;
            align-items: end;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .converter-group {
            display: flex;
            flex-direction: column;
        }
        
        .converter-label {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--dark);
        }
        
        .converter-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .converter-select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            font-size: 1rem;
            background-color: white;
        }
        
        .converter-swap {
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.3s ease;
            margin-bottom: 0.5rem;
        }
        
        .converter-swap:hover {
            background: #1976d2;
        }
        
        .converter-result {
            background: white;
            padding: 1rem;
            border-radius: 4px;
            font-weight: 600;
            color: var(--success);
            text-align: center;
            font-size: 1.2rem;
            margin-top: 1rem;
        }
        
        .converter-rates {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }
        
        .rate-item {
            text-align: center;
            font-size: 0.9rem;
            color: #666;
        }
        
        .warning-badge {
            background: #ffc107;
            color: #856404;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            margin-left: 0.5rem;
            font-weight: 600;
        }
        
        .undecided-hotel {
            background: #fff3cd;
        }
        
        .undecided-hotel:hover {
            background: #ffeaa7;
        }
        
        .budget-tips {
            background: #e7f3ff;
            padding: 1rem;
            border-radius: 8px;
            margin-top: 2rem;
        }
        
        .loading {
            opacity: 0.7;
            pointer-events: none;
        }
        
        .planned-badge {
            background: var(--success);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            margin-left: 0.5rem;
            font-weight: 600;
        }
        
        .optional-badge {
            background: var(--warning);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            margin-left: 0.5rem;
            font-weight: 600;
        }
        
        /* NOUVEAU DESIGN DES FLÈCHES DE NAVIGATION - SANS FOND */
        .day-navigation {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .nav-arrow {
            background: none;
            border: none;
            font-size: 3rem;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: transparent;
            background-image: linear-gradient(135deg, var(--arrow-japan) 0%, var(--arrow-philippines) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .nav-arrow:hover:not(.disabled) {
            transform: translateY(-3px) scale(1.1);
            background-image: linear-gradient(135deg, var(--arrow-philippines) 0%, var(--arrow-japan) 100%);
            text-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .nav-arrow.disabled {
            background-image: none;
            color: #cccccc;
            cursor: not-allowed;
            opacity: 0.5;
            transform: none;
            text-shadow: none;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            .subtitle {
                font-size: 1.2rem;
            }
            
            .love-quote {
                font-size: 1.5rem;
            }
            
            .countdown-timer {
                gap: 0.5rem;
            }
            
            .countdown-circle {
                width: 60px;
                height: 60px;
                font-size: 1.2rem;
            }
            
            .countdown-item {
                min-width: 70px;
            }
            
            .nav-menu {
                width: 100%;
                right: -100%;
            }
            
            .day-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .places-grid {
                grid-template-columns: 1fr;
            }
            
            .converter-form {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }
            
            .converter-swap {
                order: 3;
                margin: 0.5rem auto;
            }
            
            .map-controls {
                flex-direction: column;
            }
            
            #map-legend {
                flex-direction: column;
            }
            
            .day-navigation {
                gap: 0.5rem;
            }
            
            .nav-arrow {
                font-size: 2.5rem;
            }
        }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
</head>
<body>
    <!-- Page d'accueil -->
    <section id="home-page">
        <div class="home-content">
            <h1>Lune de Miel Japon & Philippines</h1>
            <p class="subtitle">20 Février - 13 Mars 2026</p>
            
            <div class="love-quote">All you need is love... powder and sun.</div>
            
            <!-- Compte à rebours -->
            <div class="countdown">
                <div class="countdown-title">Départ dans :</div>
                <div class="countdown-timer">
                    <div class="countdown-item">
                        <div class="countdown-circle" id="countdown-days">00</div>
                        <div class="countdown-label">Jours</div>
                    </div>
                    <div class="countdown-item">
                        <div class="countdown-circle" id="countdown-hours">00</div>
                        <div class="countdown-label">Heures</div>
                    </div>
                    <div class="countdown-item">
                        <div class="countdown-circle" id="countdown-minutes">00</div>
                        <div class="countdown-label">Minutes</div>
                    </div>
                </div>
            </div>
            
            <button class="enter-btn" id="enter-site">Accéder au planning</button>
        </div>
    </section>
    
    <!-- Pages de contenu -->
    <section id="content-pages">
        <!-- Navigation -->
        <header class="nav-header">
            <div class="nav-container">
                <div class="nav-title">Notre Lune de Miel</div>
                <button class="menu-btn" id="menu-toggle">Menu</button>
            </div>
        </header>
        
        <!-- Menu de navigation -->
        <nav class="nav-menu" id="nav-menu">
            <div class="menu-header">
                <h3>Navigation</h3>
                <button class="close-menu" id="close-menu">×</button>
            </div>
            <ul class="menu-links">
                <li><a href="#" class="menu-link active" data-page="planning">Planning Journalier</a></li>
                <li><a href="#" class="menu-link" data-page="points-interet">Points d'Intérêt</a></li>
                <li><a href="#" class="menu-link" data-page="carte">Carte Interactive</a></li>
                <li><a href="#" class="menu-link" data-page="convertisseur">Convertisseur</a></li>
                <li><a href="#" class="menu-link" data-page="hotels">Services Hôteliers</a></li>
            </ul>
            <a href="#" class="back-home" id="back-home">Retour à l'accueil</a>
        </nav>
        
        <!-- Contenu principal -->
        <main class="container">
            <!-- Page Planning -->
            <div class="page active" id="planning-page">
                <h2 class="page-title">Planning Journalier</h2>
                <p class="page-subtitle">Découvrez le détail de chaque journée de votre voyage</p>
                
                <!-- Navigation par flèches avec nouveau design -->
                <div class="day-navigation">
                    <button class="nav-arrow" id="prev-day" disabled>←</button>
                    <div class="dropdown-container" style="flex: 1; max-width: 400px;">
                        <select class="day-dropdown" id="day-dropdown">
                            <option value="">Sélectionnez un jour...</option>
                            <!-- Les options seront générées par JavaScript -->
                        </select>
                    </div>
                    <button class="nav-arrow" id="next-day">→</button>
                </div>
                
                <div class="day-details" id="day-details">
                    <div style="text-align: center; padding: 2rem; color: #666;">
                        <p>Sélectionnez un jour dans le menu déroulant pour voir les détails</p>
                    </div>
                </div>
            </div>
            
            <!-- Page Points d'Intérêt -->
            <div class="page" id="points-interet-page">
                <h2 class="page-title">Points d'Intérêt</h2>
                <p class="page-subtitle">Découvrez les lieux à visiter pendant votre voyage</p>
                
                <div class="dropdown-container">
                    <select class="city-dropdown" id="city-dropdown">
                        <option value="all">Toutes les villes</option>
                        <!-- Les options seront générées par JavaScript -->
                    </select>
                </div>
                
                <div class="places-container" id="points-interet-list">
                    <!-- Les points d'intérêt seront générés par JavaScript -->
                </div>
            </div>
            
            <!-- Page Carte -->
            <div class="page" id="carte-page">
                <h2 class="page-title">Carte Interactive</h2>
                <p class="page-subtitle">Visualisez les points d'intérêt et hôtels sur la carte</p>
                
                <div class="map-controls">
                    <button class="map-btn active" data-layer="planned">Points d'intérêt certains</button>
                    <button class="map-btn" data-layer="optional">Options temps libre</button>
                    <button class="map-btn" data-layer="hotels">Hôtels</button>
                    <button class="map-btn" data-layer="all">Tout afficher</button>
                </div>
                
                <div id="map"></div>
                <div id="map-legend">
                    <div class="legend-item">
                        <span class="legend-color" style="background-color: #4caf50;"></span>
                        <span>Points d'intérêt certains</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" style="background-color: #ff9800;"></span>
                        <span>Options temps libre</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" style="background-color: #2196f3;"></span>
                        <span>Hébergements</span>
                    </div>
                </div>
            </div>
            
            <!-- Page Convertisseur -->
            <div class="page" id="convertisseur-page">
                <h2 class="page-title">Convertisseur de Devises</h2>
                <p class="page-subtitle">Convertissez facilement entre les devises</p>
                
                <div class="converter-container">
                    <div class="converter-form">
                        <div class="converter-group">
                            <label class="converter-label">De</label>
                            <input type="number" class="converter-input" id="converter-amount" placeholder="Montant" value="1" min="0" step="0.01">
                            <select class="converter-select" id="converter-from">
                                <option value="EUR">EUR - Euro</option>
                                <option value="JPY">JPY - Yen Japonais</option>
                                <option value="PHP">PHP - Peso Philippin</option>
                            </select>
                        </div>
                        
                        <button class="converter-swap" id="converter-swap" title="Inverser les devises">⇄</button>
                        
                        <div class="converter-group">
                            <label class="converter-label">Vers</label>
                            <div class="converter-input" style="background: #f8f9fa; display: flex; align-items: center; justify-content: center; font-weight: bold;">
                                <span id="converter-result-amount">1.00</span>
                            </div>
                            <select class="converter-select" id="converter-to">
                                <option value="JPY">JPY - Yen Japonais</option>
                                <option value="PHP">PHP - Peso Philippin</option>
                                <option value="EUR">EUR - Euro</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="converter-rates">
                        <div class="rate-item">
                            <strong>1 EUR = <span id="rate-eur-jpy">160.50</span> JPY</strong>
                        </div>
                        <div class="rate-item">
                            <strong>1 EUR = <span id="rate-eur-php">60.25</span> PHP</strong>
                        </div>
                    </div>
                    
                    <button class="converter-update" id="update-rates" style="display: block; margin: 1rem auto 0; padding: 0.5rem 1rem; background: var(--secondary); color: white; border: none; border-radius: 4px; cursor: pointer;">
                        Actualiser les taux
                    </button>
                    
                    <p style="margin-top: 1rem; font-size: 0.9rem; color: #666; text-align: center;">
                        Dernière mise à jour : <span id="last-update">...</span>
                    </p>
                </div>
                
                <div class="budget-tips">
                    <h3 style="color: var(--secondary); margin-bottom: 0.5rem;">💡 Conseils Budget</h3>
                    <ul style="color: #666;">
                        <li><strong>Japon</strong> : 100-150€ par personne/jour (hôtel, repas, transports)</li>
                        <li><strong>Philippines</strong> : 50-80€ par personne/jour</li>
                        <li><strong>Activités</strong> : Ski (50-80€/jour), Plongée PADI (200-300€)</li>
                        <li>Prévoir environ 20% de budget supplémentaire pour les imprévus</li>
                    </ul>
                </div>
            </div>
            
            <!-- Page Hôtels -->
            <div class="page" id="hotels-page">
                <h2 class="page-title">Services et Équipements des Hôtels</h2>
                <p class="page-subtitle">Retrouvez tous les services proposés par vos hébergements</p>
                
                <table class="hotel-table">
                    <thead>
                        <tr>
                            <th>Hôtel</th>
                            <th>Ville</th>
                            <th>Type de chambre</th>
                            <th>Services principaux</th>
                            <th>Équipements</th>
                            <th>Check-in / Check-out</th>
                        </tr>
                    </thead>
                    <tbody id="hotel-services-body">
                        <!-- Les services hôteliers seront générés par JavaScript -->
                    </tbody>
                </table>
            </div>
        </main>
    </section>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        // Données du voyage avec géocodage automatique et distinction points certains/options
        const voyageData = {
            jours: [
                {
                    date: "2026-02-20",
                    lieu: "Vol Paris → Istanbul",
                    pays: "International",
                    location: "Aéroport Paris CDG, France",
                    hotel: "Nuit à bord",
                    activites: [
                        { time: "18:50", title: "Départ de Paris CDG", description: "Vol TK1828 Paris → Istanbul", location: "Aéroport Paris CDG, France" }
                    ],
                    pointsInteret: []
                },
                {
                    date: "2026-02-21",
                    lieu: "Tokyo",
                    pays: "Japon",
                    location: "Tokyo, Japon",
                    hotel: "The B Ginza",
                    activites: [
                        { time: "00:30", title: "Arrivée Istanbul", description: "Escale à l'aéroport d'Istanbul", location: "Aéroport d'Istanbul, Turquie" },
                        { time: "02:30", title: "Décollage d'Istanbul", description: "Vol TK198 Istanbul → Tokyo", location: "Aéroport d'Istanbul, Turquie" },
                        { time: "19:45", title: "Arrivée à Tokyo Haneda", description: "Atterrissage à l'aéroport de Tokyo Haneda", location: "Aéroport de Tokyo Haneda, Japon" }
                    ],
                    pointsInteret: [
                        { nom: "The B Ginza", description: "Hôtel situé dans le quartier chic de Ginza", location: "The B Ginza, Ginza, Tokyo", type: "hotel", planned: true },
                        { nom: "Ginza", description: "Quartier commerçant luxueux de Tokyo", location: "Ginza, Tokyo, Japon", type: "shopping", planned: true },
                        { nom: "Tsukiji Outer Market", description: "Marché aux poissons et cuisine de rue", location: "Tsukiji Outer Market, Tokyo, Japon", type: "food", planned: false },
                        { nom: "Hamarikyu Gardens", description: "Jardins japonais traditionnels avec maison de thé", location: "Hamarikyu Gardens, Tokyo, Japon", type: "nature", planned: false }
                    ]
                },
                {
                    date: "2026-02-22",
                    lieu: "Tokyo",
                    pays: "Japon",
                    location: "Tokyo, Japon",
                    hotel: "The B Ginza",
                    activites: [
                        { time: "09:00", title: "Temple Senso-ji à Asakusa", description: "Visite du plus ancien temple de Tokyo", location: "Temple Senso-ji, Asakusa, Tokyo" },
                        { time: "13:30", title: "Parc Ueno et ses musées", description: "Découverte du parc et des musées", location: "Parc Ueno, Tokyo, Japon" },
                        { time: "18:00", title: "Découverte du quartier d'Ueno", description: "Exploration du quartier et dîner", location: "Ueno, Tokyo, Japon" }
                    ],
                    pointsInteret: [
                        { nom: "Temple Senso-ji", description: "Plus ancien temple bouddhiste de Tokyo", location: "Temple Senso-ji, Asakusa, Tokyo", type: "culture", planned: true },
                        { nom: "Nakamise-dori", description: "Rue commerçante traditionnelle menant au temple", location: "Nakamise-dori, Asakusa, Tokyo", type: "shopping", planned: true },
                        { nom: "Parc d'Ueno", description: "Grand parc avec musées, zoo et temples", location: "Parc Ueno, Tokyo, Japon", type: "nature", planned: true },
                        { nom: "Musée National de Tokyo", description: "Plus ancien et plus grand musée du Japon", location: "Musée National de Tokyo, Parc Ueno, Tokyo", type: "culture", planned: false }
                    ]
                },
                {
                    date: "2026-02-23",
                    lieu: "Tokyo",
                    pays: "Japon",
                    location: "Tokyo, Japon",
                    hotel: "The B Ginza",
                    activites: [
                        { time: "09:30", title: "Jardins du Palais Impérial", description: "Visite des jardins extérieurs du Palais", location: "Palais Impérial de Tokyo, Japon" },
                        { time: "14:00", title: "TeamLab Planets", description: "Expérience artistique numérique immersive", location: "TeamLab Planets, Tokyo, Japon" },
                        { time: "18:30", title: "Odaiba et vue sur la baie", description: "Découverte d'Odaiba et vue sur la baie de Tokyo", location: "Statue of Liberty - Odaiba, Tokyo, Japon" }
                    ],
                    pointsInteret: [
                        { nom: "Palais Impérial", description: "Résidence principale de l'Empereur du Japon", location: "Palais Impérial de Tokyo, Japon", type: "culture", planned: true },
                        { nom: "TeamLab Planets", description: "Expérience artistique numérique immersive", location: "TeamLab Planets, Tokyo, Japon", type: "art", planned: true },
                        { nom: "Odaiba", description: "Île artificielle avec centres commerciaux et divertissements", location: "Odaiba, Tokyo, Japon", type: "entertainment", planned: true },
                        { nom: "Rainbow Bridge", description: "Pont illuminé offrant une vue magnifique sur Tokyo", location: "Rainbow Bridge, Tokyo, Japon", type: "viewpoint", planned: false }
                    ]
                },
                {
                    date: "2026-02-24",
                    lieu: "Tokyo",
                    pays: "Japon",
                    location: "Tokyo, Japon",
                    hotel: "The B Ginza",
                    activites: [
                        { time: "09:30", title: "Sanctuaire Hie-jinja", description: "Visite du sanctuaire aux torii rouges", location: "Sanctuaire Hie-jinja, Tokyo, Japon" },
                        { time: "13:00", title: "Sunshine 60 Observatory", description: "Vue panoramique depuis l'observatoire", location: "Sunshine 60 Observatory, Ikebukuro, Tokyo" },
                        { time: "18:00", title: "Quartier de Shinjuku et ses néons", description: "Exploration du quartier et ses illuminations", location: "Shinjuku, Tokyo, Japon" }
                    ],
                    pointsInteret: [
                        { nom: "Sanctuaire Hie-jinja", description: "Sanctuaire shintoïste connu pour ses torii rouges", location: "Sanctuaire Hie-jinja, Tokyo, Japon", type: "culture", planned: true },
                        { nom: "Ikebukuro", description: "Quartier commerçant et de divertissement", location: "Ikebukuro, Tokyo, Japon", type: "shopping", planned: true },
                        { nom: "Sunshine 60 Observatory", description: "Observatoire offrant une vue panoramique sur Tokyo", location: "Sunshine 60 Observatory, Ikebukuro, Tokyo", type: "viewpoint", planned: true },
                        { nom: "Shinjuku", description: "Quartier d'affaires et de divertissement nocturne", location: "Shinjuku, Tokyo, Japon", type: "entertainment", planned: true }
                    ]
                },
                {
                    date: "2026-02-25",
                    lieu: "Furano",
                    pays: "Japon",
                    location: "Furano, Hokkaido, Japon",
                    hotel: "Winery Hotel and Condominium Furano",
                    activites: [
                        { time: "09:30", title: "Enregistrement vol domestique", description: "Formalités d'enregistrement", location: "Aéroport de Tokyo Haneda, Japon" },
                        { time: "11:10", title: "Vol Tokyo → Asahikawa", description: "Décollage pour Asahikawa", location: "Aéroport de Tokyo Haneda, Japon" },
                        { time: "12:50", title: "Arrivée Asahikawa", description: "Atterrissage à l'aéroport d'Asahikawa", location: "Aéroport d'Asahikawa, Japon" },
                        { time: "13:30", title: "Récupération bagages et transfert", description: "Récupération des bagages et trajet vers Furano", location: "Aéroport d'Asahikawa, Japon" },
                        { time: "16:30", title: "Location équipement ski", description: "Location du matériel de ski", location: "Furano, Hokkaido, Japon" }
                    ],
                    pointsInteret: [
                        { nom: "Winery Hotel and Condominium Furano", description: "Hôtel avec vue sur les vignobles et montagnes", location: "Winery Hotel and Condominium Furano, Hokkaido", type: "hotel", planned: true },
                        { nom: "Station de ski Furano", description: "Domaine skiable réputé d'Hokkaido", location: "Station de ski Furano, Hokkaido, Japon", type: "ski", planned: true },
                        { nom: "Vignobles de Furano", description: "Vignobles produisant le vin local", location: "Vignobles de Furano, Hokkaido, Japon", type: "food", planned: false }
                    ]
                },
                {
                    date: "2026-02-26",
                    lieu: "Furano",
                    pays: "Japon",
                    location: "Furano, Hokkaido, Japon",
                    hotel: "Winery Hotel and Condominium Furano",
                    activites: [
                        { time: "09:00", title: "Ski à Furano Resort", description: "Session de ski sur les pistes", location: "Station de ski Furano, Hokkaido, Japon" },
                        { time: "17:30", title: "Détente onsen", description: "Détente dans les sources chaudes", location: "Winery Hotel and Condominium Furano, Hokkaido" }
                    ],
                    pointsInteret: [
                        { nom: "Station de ski Furano", description: "Domaine skiable avec pistes pour tous niveaux", location: "Station de ski Furano, Hokkaido, Japon", type: "ski", planned: true },
                        { nom: "Onsen de Furano", description: "Sources chaudes naturelles pour la détente", location: "Winery Hotel and Condominium Furano, Hokkaido", type: "wellness", planned: true }
                    ]
                },
                {
                    date: "2026-02-27",
                    lieu: "Furano",
                    pays: "Japon",
                    location: "Furano, Hokkaido, Japon",
                    hotel: "Winery Hotel and Condominium Furano",
                    activites: [
                        { time: "09:00", title: "Ski à Furano Resort", description: "Session de ski sur les pistes", location: "Station de ski Furano, Hokkaido, Japon" },
                        { time: "17:30", title: "Détente onsen", description: "Détente dans les sources chaudes", location: "Winery Hotel and Condominium Furano, Hokkaido" }
                    ],
                    pointsInteret: [
                        { nom: "Zones hors-piste Furano", description: "Secteurs pour skieurs expérimentés avec guide", location: "Station de ski Furano, Hokkaido, Japon", type: "ski", planned: true },
                        { nom: "Paysages montagneux", description: "Vues panoramiques sur les montagnes d'Hokkaido", location: "Furano, Hokkaido, Japon", type: "nature", planned: false }
                    ]
                },
                {
                    date: "2026-02-28",
                    lieu: "Furano",
                    pays: "Japon",
                    location: "Furano, Hokkaido, Japon",
                    hotel: "Winery Hotel and Condominium Furano",
                    activites: [
                        { time: "09:00", title: "Ski à Furano Resort", description: "Session de ski sur les pistes", location: "Station de ski Furano, Hokkaido, Japon" },
                        { time: "17:30", title: "Détente onsen", description: "Détente dans les sources chaudes", location: "Winery Hotel and Condominium Furano, Hokkaido" }
                    ],
                    pointsInteret: [
                        { nom: "Fromagerie Furano", description: "Fromagerie produisant des fromages locaux", location: "Fromagerie Furano, Hokkaido, Japon", type: "food", planned: true },
                        { nom: "Furano Wine Factory", description: "Domaine viticole et cave de dégustation", location: "Furano Wine Factory, Hokkaido, Japon", type: "food", planned: true },
                        { nom: "Paysages ruraux de Furano", description: "Champs et collines de la région", location: "Furano, Hokkaido, Japon", type: "nature", planned: false }
                    ]
                },
                {
                    date: "2026-03-01",
                    lieu: "Furano",
                    pays: "Japon",
                    location: "Furano, Hokkaido, Japon",
                    hotel: "Winery Hotel and Condominium Furano",
                    activites: [
                        { time: "09:00", title: "Ski à Furano Resort", description: "Session de ski sur les pistes", location: "Station de ski Furano, Hokkaido, Japon" },
                        { time: "17:30", title: "Détente onsen", description: "Détente dans les sources chaudes", location: "Winery Hotel and Condominium Furano, Hokkaido" }
                    ],
                    pointsInteret: [
                        { nom: "Station de ski Furano", description: "Dernières descentes sur les pistes", location: "Station de ski Furano, Hokkaido, Japon", type: "ski", planned: true },
                        { nom: "Centre-ville Furano", description: "Dernières emplettes et découvertes", location: "Furano, Hokkaido, Japon", type: "shopping", planned: false }
                    ]
                },
                {
                    date: "2026-03-02",
                    lieu: "Kyoto",
                    pays: "Japon",
                    location: "Kyoto, Japon",
                    hotel: "Hôtel à Kyoto (à déterminer)",
                    activites: [
                        { time: "08:30", title: "Transfert aéroport", description: "Trajet vers l'aéroport de Shin Chitose", location: "Aéroport de Shin Chitose, Hokkaido" },
                        { time: "11:30", title: "Enregistrement vol", description: "Formalités d'enregistrement", location: "Aéroport de Shin Chitose, Hokkaido" },
                        { time: "14:00", title: "Vol Shin Chitose → Osaka Itami", description: "Décollage pour Osaka", location: "Aéroport de Shin Chitose, Hokkaido" },
                        { time: "16:05", title: "Arrivée Osaka", description: "Atterrissage à l'aéroport d'Osaka Itami", location: "Aéroport d'Osaka Itami, Japon" },
                        { time: "16:45", title: "Récupération bagages", description: "Récupération des bagages", location: "Aéroport d'Osaka Itami, Japon" },
                        { time: "17:15", title: "Transfert vers Kyoto", description: "Trajet en train ou bus vers Kyoto", location: "Aéroport d'Osaka Itami, Japon" },
                        { time: "18:30", title: "Arrivée Kyoto et installation", description: "Arrivée à Kyoto et check-in à l'hôtel", location: "Kyoto, Japon" }
                    ],
                    pointsInteret: [
                        { nom: "Gare de Kyoto", description: "Gare moderne avec centre commercial et observatoire", location: "Gare de Kyoto, Japon", type: "transport", planned: true },
                        { nom: "Pontocho", description: "Allée traditionnelle avec restaurants et bars", location: "Pontocho, Kyoto, Japon", type: "food", planned: false }
                    ]
                },
                {
                    date: "2026-03-03",
                    lieu: "Kyoto",
                    pays: "Japon",
                    location: "Kyoto, Japon",
                    hotel: "Hôtel à Kyoto (à déterminer)",
                    activites: [
                        { time: "09:00", title: "Kinkaku-ji (Pavillon d'Or)", description: "Visite du célèbre temple recouvert d'or", location: "Kinkaku-ji, Kyoto, Japon" },
                        { time: "11:30", title: "Marché Nishiki", description: "Découverte du marché alimentaire traditionnel", location: "Marché Nishiki, Kyoto, Japon" },
                        { time: "12:30", title: "Déjeuner au marché", description: "Repas avec spécialités locales", location: "Marché Nishiki, Kyoto, Japon" },
                        { time: "14:00", title: "Sanctuaire Heian", description: "Visite du sanctuaire et ses jardins", location: "Sanctuaire Heian, Kyoto, Japon" }
                    ],
                    pointsInteret: [
                        { nom: "Kinkaku-ji (Pavillon d'Or)", description: "Temple bouddhiste recouvert de feuilles d'or", location: "Kinkaku-ji, Kyoto, Japon", type: "culture", planned: true },
                        { nom: "Marché Nishiki", description: "Marché couvert avec spécialités locales", location: "Marché Nishiki, Kyoto, Japon", type: "food", planned: true },
                        { nom: "Sanctuaire Heian", description: "Sanctuaire shintoïste avec jardins paisibles", location: "Sanctuaire Heian, Kyoto, Japon", type: "culture", planned: true },
                        { nom: "Gion", description: "Quartier des geishas et maisons de thé", location: "Gion, Kyoto, Japon", type: "culture", planned: false }
                    ]
                },
                {
                    date: "2026-03-04",
                    lieu: "Kyoto",
                    pays: "Japon",
                    location: "Kyoto, Japon",
                    hotel: "Hôtel à Kyoto (à déterminer)",
                    activites: [
                        { time: "07:30", title: "Fushimi Inari (visite tôt)", description: "Visite du sanctuaire aux milliers de torii", location: "Fushimi Inari Taisha, Kyoto, Japon" },
                        { time: "10:00", title: "Chemin du Philosophe", description: "Promenade le long du canal pittoresque", location: "Chemin du Philosophe, Kyoto, Japon" },
                        { time: "12:00", title: "Déjeuner", description: "Repas le long du canal", location: "Chemin du Philosophe, Kyoto, Japon" },
                        { time: "18:00", title: "Quartier de Pontocho", description: "Exploration du quartier traditionnel", location: "Pontocho, Kyoto, Japon" }
                    ],
                    pointsInteret: [
                        { nom: "Fushimi Inari Taisha", description: "Sanctuaire célèbre pour ses milliers de torii rouges", location: "Fushimi Inari Taisha, Kyoto, Japon", type: "culture", planned: true },
                        { nom: "Chemin du Philosophe", description: "Sentier pédestre le long d'un canal pittoresque", location: "Chemin du Philosophe, Kyoto, Japon", type: "nature", planned: true },
                        { nom: "Temple Ginkaku-ji", description: "Temple du Pavillon d'Argent et ses jardins", location: "Ginkaku-ji, Kyoto, Japon", type: "culture", planned: false },
                        { nom: "Pontocho", description: "Allée traditionnelle avec restaurants", location: "Pontocho, Kyoto, Japon", type: "food", planned: false }
                    ]
                },
                {
                    date: "2026-03-05",
                    lieu: "Nara",
                    pays: "Japon",
                    location: "Nara, Japon",
                    hotel: "Hôtel à Kyoto (à déterminer)",
                    activites: [
                        { time: "08:30", title: "Train pour Nara", description: "Trajet en train vers Nara", location: "Gare de Kyoto, Japon" },
                        { time: "09:30", title: "Arrivée Nara", description: "Arrivée à Nara et début des visites", location: "Nara, Japon" },
                        { time: "09:45", title: "Todai-ji et grand Bouddha", description: "Visite du temple et du grand Bouddha", location: "Todai-ji, Nara, Japon" },
                        { time: "11:30", title: "Parc de Nara et cerfs", description: "Rencontre avec les cerfs sacrés en liberté", location: "Parc de Nara, Japon" },
                        { time: "13:30", title: "Quartier traditionnel Nara-machi", description: "Exploration du quartier traditionnel", location: "Nara-machi, Nara, Japon" }
                    ],
                    pointsInteret: [
                        { nom: "Todai-ji", description: "Temple abritant le plus grand Bouddha en bronze du monde", location: "Todai-ji, Nara, Japon", type: "culture", planned: true },
                        { nom: "Parc de Nara", description: "Parc avec centaines de cerfs sacrés en liberté", location: "Parc de Nara, Japon", type: "nature", planned: true },
                        { nom: "Nara-machi", description: "Quartier traditionnel avec maisons anciennes", location: "Nara-machi, Nara, Japon", type: "culture", planned: true },
                        { nom: "Kasuga Taisha", description: "Sanctuaire aux milliers de lanternes de pierre", location: "Kasuga Taisha, Nara, Japon", type: "culture", planned: false }
                    ]
                },
                {
                    date: "2026-03-06",
                    lieu: "Arashiyama & Vol",
                    pays: "Japon",
                    location: "Arashiyama, Kyoto, Japon",
                    hotel: "Vol Osaka → Manille",
                    activites: [
                        { time: "09:00", title: "Arashiyama (forêt bambous)", description: "Visite de la célèbre forêt de bambous", location: "Forêt de bambous d'Arashiyama, Kyoto" },
                        { time: "13:30", title: "Transfert aéroport Kansai", description: "Trajet vers l'aéroport d'Osaka", location: "Aéroport du Kansai, Osaka, Japon" },
                        { time: "16:30", title: "Enregistrement vol international", description: "Formalités d'enregistrement", location: "Aéroport du Kansai, Osaka, Japon" },
                        { time: "19:35", title: "Vol Osaka → Manille", description: "Décollage pour Manille", location: "Aéroport du Kansai, Osaka, Japon" }
                    ],
                    pointsInteret: [
                        { nom: "Forêt de bambous d'Arashiyama", description: "Allée célèbre de bambous géants", location: "Forêt de bambous d'Arashiyama, Kyoto", type: "nature", planned: true },
                        { nom: "Temple Tenryu-ji", description: "Temple classé au patrimoine mondial de l'UNESCO", location: "Temple Tenryu-ji, Arashiyama, Kyoto", type: "culture", planned: false },
                        { nom: "Pont Togetsukyo", description: "Pont emblématique d'Arashiyama", location: "Pont Togetsukyo, Arashiyama, Kyoto", type: "viewpoint", planned: false }
                    ]
                },
                {
                    date: "2026-03-07",
                    lieu: "Bohol",
                    pays: "Philippines",
                    location: "Bohol, Philippines",
                    hotel: "Fox & The Firefly",
                    activites: [
                        { time: "23:15", title: "Arrivée Manille", description: "Arrivée à l'aéroport de Manille", location: "Aéroport de Manille, Philippines" },
                        { time: "05:20", title: "Vol Manille → Panglao", description: "Décollage pour Panglao", location: "Aéroport de Manille, Philippines" },
                        { time: "06:55", title: "Arrivée Panglao", description: "Atterrissage à l'aéroport de Panglao", location: "Aéroport de Panglao, Bohol, Philippines" },
                        { time: "08:00", title: "Repos", description: "Temps de repos après le voyage", location: "Fox & The Firefly, Bohol, Philippines" },
                        { time: "14:30", title: "Transfert Fox & The Firefly", description: "Trajet vers le lodge", location: "Fox & The Firefly, Bohol, Philippines" },
                        { time: "20:00", title: "Observation lucioles", description: "Observation des lucioles le long de la rivière", location: "Fox & The Firefly, Bohol, Philippines" }
                    ],
                    pointsInteret: [
                        { nom: "Fox & The Firefly", description: "Lodge écologique avec observation de lucioles", location: "Fox & The Firefly, Bohol, Philippines", type: "hotel", planned: true },
                        { nom: "Rivière Loboc", description: "Rivière où se trouve le lodge", location: "Rivière Loboc, Bohol, Philippines", type: "nature", planned: false }
                    ]
                },
                {
                    date: "2026-03-08",
                    lieu: "Bohol",
                    pays: "Philippines",
                    location: "Bohol, Philippines",
                    hotel: "Fox & The Firefly",
                    activites: [
                        { time: "09:00", title: "Collines de Chocolat", description: "Visite des célèbres formations géologiques", location: "Collines de Chocolat, Bohol, Philippines" },
                        { time: "10:30", title: "Sanctuaire des Tarsiers", description: "Rencontre avec les plus petits primates du monde", location: "Sanctuaire des Tarsiers, Bohol, Philippines" },
                        { time: "12:30", title: "Croisière rivière Loboc", description: "Croisière avec déjeuner sur la rivière", location: "Rivière Loboc, Bohol, Philippines" }
                    ],
                    pointsInteret: [
                        { nom: "Collines de Chocolat", description: "Formations géologiques uniques en forme de cônes", location: "Collines de Chocolat, Bohol, Philippines", type: "nature", planned: true },
                        { nom: "Sanctuaire des Tarsiers", description: "Refuge pour les plus petits primates du monde", location: "Sanctuaire des Tarsiers, Bohol, Philippines", type: "nature", planned: true },
                        { nom: "Croisière sur la rivière Loboc", description: "Croisière pittoresque avec déjeuner buffet", location: "Rivière Loboc, Bohol, Philippines", type: "food", planned: true }
                    ]
                },
                {
                    date: "2026-03-09",
                    lieu: "Bohol",
                    pays: "Philippines",
                    location: "Bohol, Philippines",
                    hotel: "Amorita Resort",
                    activites: [
                        { time: "10:00", title: "Transfert vers Amorita Resort", description: "Trajet vers le resort de Panglao", location: "Bohol, Philippines" },
                        { time: "11:00", title: "Arrivée Amorita Resort", description: "Arrivée au resort de luxe", location: "Amorita Resort, Panglao, Bohol, Philippines" },
                        { time: "14:00", title: "Piscine/plage", description: "Détente à la piscine ou sur la plage", location: "Amorita Resort, Panglao, Bohol, Philippines" },
                        { time: "18:00", title: "Coucher de soleil", description: "Observation du coucher de soleil", location: "Amorita Resort, Panglao, Bohol, Philippines" }
                    ],
                    pointsInteret: [
                        { nom: "Amorita Resort", description: "Resort de luxe sur les falaises de Panglao", location: "Amorita Resort, Panglao, Bohol, Philippines", type: "hotel", planned: true },
                        { nom: "Plage d'Alona", description: "Plage de sable blanc célèbre de Panglao", location: "Plage d'Alona, Panglao, Bohol, Philippines", type: "beach", planned: false }
                    ]
                },
                {
                    date: "2026-03-10",
                    lieu: "Bohol",
                    pays: "Philippines",
                    location: "Bohol, Philippines",
                    hotel: "Amorita Resort",
                    activites: [
                        { time: "08:00", title: "Départ pour plongée PADI", description: "Transfert vers le centre de plongée", location: "Amorita Resort, Panglao, Bohol, Philippines" },
                        { time: "15:00", title: "Détente", description: "Temps libre pour se reposer", location: "Amorita Resort, Panglao, Bohol, Philippines" }
                    ],
                    pointsInteret: [
                        { nom: "Île de Balicasag", description: "Île réputée pour ses spots de plongée exceptionnels", location: "Île de Balicasag, Bohol, Philippines", type: "diving", planned: true },
                        { nom: "Drop-off de Balicasag", description: "Mur de corail avec tombant spectaculaire", location: "Île de Balicasag, Bohol, Philippines", type: "diving", planned: true },
                        { nom: "Jardin corallien", description: "Zone corallienne riche en vie marine", location: "Île de Balicasag, Bohol, Philippines", type: "diving", planned: true }
                    ]
                },
                {
                    date: "2026-03-11",
                    lieu: "Bohol",
                    pays: "Philippines",
                    location: "Bohol, Philippines",
                    hotel: "Amorita Resort",
                    activites: [
                        { time: "10:00", title: "Snorkeling avec dauphins", description: "Excursion matinale pour voir les dauphins", location: "Plage d'Alona, Panglao, Bohol, Philippines" },
                        { time: "15:00", title: "Détente spa et plage", description: "Journée détente au resort", location: "Amorita Resort, Panglao, Bohol, Philippines" }
                    ],
                    pointsInteret: [
                        { nom: "Snorkeling avec dauphins", description: "Excursion pour nager avec les dauphins", location: "Plage d'Alona, Panglao, Bohol, Philippines", type: "diving", planned: false },
                        { nom: "Amorita Resort Spa", description: "Spa proposant des soins traditionnels", location: "Amorita Resort, Panglao, Bohol, Philippines", type: "wellness", planned: false },
                        { nom: "Plage d'Alona", description: "Plage pour la détente et les activités nautiques", location: "Plage d'Alona, Panglao, Bohol, Philippines", type: "beach", planned: false }
                    ]
                },
                {
                    date: "2026-03-12",
                    lieu: "Bohol",
                    pays: "Philippines",
                    location: "Bohol, Philippines",
                    hotel: "Amorita Resort",
                    activites: [
                        { time: "09:00", title: "Activités au choix au resort", description: "Dernières activités selon envies", location: "Amorita Resort, Panglao, Bohol, Philippines" },
                        { time: "18:00", title: "Dîner d'adieu", description: "Dernier repas aux Philippines", location: "Amorita Resort, Panglao, Bohol, Philippines" }
                    ],
                    pointsInteret: [
                        { nom: "Amorita Resort", description: "Dernière journée de détente au resort", location: "Amorita Resort, Panglao, Bohol, Philippines", type: "hotel", planned: true },
                        { nom: "Plage d'Alona", description: "Derniers moments sur la plage", location: "Plage d'Alona, Panglao, Bohol, Philippines", type: "beach", planned: false }
                    ]
                },
                {
                    date: "2026-03-13",
                    lieu: "Vol retour",
                    pays: "International",
                    location: "Aéroport de Tagbilaran, Philippines",
                    hotel: "Vol",
                    activites: [
                        { time: "10:00", title: "Enregistrement vol", description: "Formalités d'enregistrement", location: "Aéroport de Tagbilaran, Philippines" },
                        { time: "12:00", title: "Vol Tagbilaran → Manille", description: "Décollage pour Manille", location: "Aéroport de Tagbilaran, Philippines" },
                        { time: "13:30", title: "Arrivée Manille", description: "Arrivée à Manille et correspondance", location: "Aéroport de Manille, Philippines" },
                        { time: "16:00", title: "Vol Manille → Paris", description: "Décollage pour le vol long-courrier retour", location: "Aéroport de Manille, Philippines" },
                        { time: "", title: "Nuit à bord", description: "Nuit dans l'avion durant le vol retour", location: "En vol" }
                    ],
                    pointsInteret: [
                        { nom: "Aéroport de Tagbilaran", description: "Départ des Philippines", type: "airport", location: "Aéroport de Tagbilaran, Philippines", planned: true },
                        { nom: "Aéroport de Manille", description: "Correspondance pour le vol international", type: "airport", location: "Aéroport de Manille, Philippines", planned: true }
                    ]
                }
            ],
            hotels: [
                {
                    nom: "The B Ginza",
                    ville: "Tokyo",
                    pays: "Japon",
                    typeChambre: "Chambre Double en Angle",
                    services: ["Wi-Fi gratuit", "Room service", "Concierge", "Service de nettoyage quotidien", "Climatisation"],
                    equipements: ["Salle de sport", "Business center", "Restaurant", "Bar", "Salle de réunion"],
                    checkIn: "15:00",
                    checkOut: "11:00",
                    location: "The B Ginza, Ginza, Tokyo, Japon"
                },
                {
                    nom: "Winery Hotel and Condominium Furano",
                    ville: "Furano",
                    pays: "Japon",
                    typeChambre: "Chambre Twin Standard Hollywood",
                    services: ["Petit-déjeuner inclus", "Service de ski", "Location d'équipement", "Service de navette", "Onsen privé"],
                    equipements: ["Cuisinette", "Lave-linge", "Chauffage au sol", "Parking gratuit", "Restaurant", "Spa"],
                    checkIn: "14:00",
                    checkOut: "10:00",
                    location: "Winery Hotel and Condominium Furano, Hokkaido, Japon"
                },
                {
                    nom: "Hôtel à Kyoto (à déterminer)",
                    ville: "Kyoto",
                    pays: "Japon",
                    typeChambre: "À déterminer",
                    services: ["Wi-Fi gratuit", "Service de nettoyage", "Climatisation", "À déterminer"],
                    equipements: ["À déterminer"],
                    checkIn: "15:00",
                    checkOut: "11:00",
                    location: "Kyoto, Japon"
                },
                {
                    nom: "Fox & The Firefly",
                    ville: "Bohol",
                    pays: "Philippines",
                    typeChambre: "Chambre écologique",
                    services: ["Petit-déjeuner inclus", "Observation lucioles", "Guide local", "Navette"],
                    equipements: ["Terrasse", "Vue sur rivière", "Restaurant", "Espace détente"],
                    checkIn: "14:00",
                    checkOut: "12:00",
                    location: "Fox & The Firefly, Bohol, Philippines"
                },
                {
                    nom: "Amorita Resort",
                    ville: "Bohol",
                    pays: "Philippines",
                    typeChambre: "Chambre vue mer",
                    services: ["Petit-déjeuner inclus", "Service de plage", "Navette Alona Beach", "Concierge", "Room service"],
                    equipements: ["Piscine", "Spa", "Restaurant", "Bar", "Plage privée", "Centre de plongée"],
                    checkIn: "14:00",
                    checkOut: "12:00",
                    location: "Amorita Resort, Panglao, Bohol, Philippines"
                }
            ]
        };

        // Données pour le convertisseur de devises
        const currencyData = {
            rates: {
                EUR_JPY: 160.50,
                EUR_PHP: 60.25
            },
            lastUpdate: new Date().toLocaleDateString('fr-FR')
        };

        // Variables globales
        let map;
        let markers = [];
        let currentLayer = 'planned';
        const geocodingCache = {};
        let currentDayIndex = -1;

        // Fonction pour trouver le jour le plus proche de la date actuelle
        function findClosestDayIndex() {
            const today = new Date();
            today.setHours(0, 0, 0, 0); // On ignore l'heure pour comparer seulement les dates
            
            let closestIndex = 0;
            let smallestDiff = Infinity;
            
            voyageData.jours.forEach((jour, index) => {
                const jourDate = new Date(jour.date);
                jourDate.setHours(0, 0, 0, 0);
                
                // Calculer la différence en millisecondes
                const diff = jourDate.getTime() - today.getTime();
                
                // Si la date du jour est aujourd'hui ou dans le futur ET la différence est plus petite
                if (diff >= 0 && diff < smallestDiff) {
                    smallestDiff = diff;
                    closestIndex = index;
                }
            });
            
            // Si aucun jour futur n'est trouvé, prendre le dernier jour
            if (smallestDiff === Infinity) {
                closestIndex = voyageData.jours.length - 1;
            }
            
            return closestIndex;
        }

        // Fonction de géocodage
        async function geocodeLocation(locationName) {
            // Vérifier le cache d'abord
            if (geocodingCache[locationName]) {
                return geocodingCache[locationName];
            }
            
            try {
                const response = await fetch(
                    `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(locationName)}&limit=1`
                );
                const data = await response.json();
                
                if (data && data.length > 0) {
                    const coords = {
                        lat: parseFloat(data[0].lat),
                        lng: parseFloat(data[0].lon)
                    };
                    // Mettre en cache
                    geocodingCache[locationName] = coords;
                    return coords;
                }
                return null;
            } catch (error) {
                console.warn('Géocodage échoué pour:', locationName);
                return null;
            }
        }

        // Fonction pour formater la date en français
        function formatDate(dateStr) {
            const date = new Date(dateStr);
            const options = { weekday: 'long', day: 'numeric', month: 'long' };
            return date.toLocaleDateString('fr-FR', options);
        }

        // Fonction pour formater l'heure
        function formatTime(timeStr) {
            return timeStr;
        }

        // Fonction pour générer le lien Google Maps avec géocodage
        function getMapsLink(location) {
            if (!location) return "#";
            return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(location)}`;
        }

        // Fonction pour générer le lien d'itinéraire Google Maps
        function getDirectionsLink(location) {
            if (!location) return "#";
            return `https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(location)}`;
        }

        // Compte à rebours
        function updateCountdown() {
            const targetDate = new Date('2026-02-20T18:50:00').getTime();
            const now = new Date().getTime();
            const timeLeft = targetDate - now;

            if (timeLeft > 0) {
                const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));

                document.getElementById('countdown-days').textContent = days.toString().padStart(2, '0');
                document.getElementById('countdown-hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('countdown-minutes').textContent = minutes.toString().padStart(2, '0');
            } else {
                document.querySelector('.countdown-title').textContent = 'Le voyage a commencé !';
                document.querySelector('.countdown-timer').style.display = 'none';
            }
        }

        // Initialisation de l'application
        document.addEventListener('DOMContentLoaded', function() {
            // Démarrer le compte à rebours
            updateCountdown();
            setInterval(updateCountdown, 60000);

            // Gérer le bouton d'entrée
            document.getElementById('enter-site').addEventListener('click', function() {
                document.getElementById('home-page').style.display = 'none';
                document.getElementById('content-pages').style.display = 'block';
                initializeApp();
            });

            // Gérer le bouton de retour à l'accueil
            document.getElementById('back-home').addEventListener('click', function(e) {
                e.preventDefault();
                document.getElementById('content-pages').style.display = 'none';
                document.getElementById('home-page').style.display = 'flex';
                closeMenu();
            });

            // Gérer le menu
            document.getElementById('menu-toggle').addEventListener('click', openMenu);
            document.getElementById('close-menu').addEventListener('click', closeMenu);

            // Fermer le menu en cliquant à l'extérieur
            document.addEventListener('click', function(e) {
                const navMenu = document.getElementById('nav-menu');
                const menuToggle = document.getElementById('menu-toggle');
                
                if (navMenu.classList.contains('active') && 
                    !navMenu.contains(e.target) && 
                    !menuToggle.contains(e.target)) {
                    closeMenu();
                }
            });
        });

        // Initialiser l'application après l'entrée
        function initializeApp() {
            // Générer les options du menu déroulant des jours
            const dayDropdown = document.getElementById('day-dropdown');
            voyageData.jours.forEach((jour, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = `${formatDate(jour.date)} - ${jour.lieu}`;
                dayDropdown.appendChild(option);
            });

            // Générer les options du menu déroulant des villes
            const cityDropdown = document.getElementById('city-dropdown');
            const villesUniques = [...new Set(voyageData.jours.map(jour => jour.lieu))];
            villesUniques.forEach(ville => {
                const option = document.createElement('option');
                option.value = ville;
                option.textContent = ville;
                cityDropdown.appendChild(option);
            });

            // Charger la sélection du jour sauvegardée ou le jour le plus proche
            loadDaySelection();

            // Gérer le changement de sélection dans le menu déroulant des jours
            dayDropdown.addEventListener('change', function() {
                const index = parseInt(this.value);
                if (!isNaN(index)) {
                    saveDaySelection(index);
                    showDayDetails(index);
                } else {
                    document.getElementById('day-details').innerHTML = `
                        <div style="text-align: center; padding: 2rem; color: #666;">
                            <p>Sélectionnez un jour dans le menu déroulant pour voir les détails</p>
                        </div>
                    `;
                }
            });

            // Gérer les flèches de navigation
            document.getElementById('prev-day').addEventListener('click', function() {
                if (currentDayIndex > 0) {
                    navigateToDay(currentDayIndex - 1);
                }
            });

            document.getElementById('next-day').addEventListener('click', function() {
                if (currentDayIndex < voyageData.jours.length - 1) {
                    navigateToDay(currentDayIndex + 1);
                }
            });

            // Gérer le changement de sélection dans le menu déroulant des villes
            cityDropdown.addEventListener('change', function() {
                generatePointsInteret(this.value);
            });

            // Initialiser le convertisseur de devises
            initializeCurrencyConverter();

            // Gérer la navigation entre les pages
            document.querySelectorAll('.menu-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const pageId = this.dataset.page;
                    showPage(pageId);
                    closeMenu();
                });
            });

            // Gérer les boutons de contrôle de la carte
            document.querySelectorAll('.map-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.map-btn').forEach(b => {
                        b.classList.remove('active');
                    });
                    this.classList.add('active');
                    currentLayer = this.dataset.layer;
                    updateMapLayer();
                });
            });

            // Afficher la première page
            showPage('planning');
        }

        // Fonction pour naviguer vers un jour spécifique
        function navigateToDay(index) {
            const dayDropdown = document.getElementById('day-dropdown');
            dayDropdown.value = index;
            saveDaySelection(index);
            showDayDetails(index);
        }

        // Fonction pour afficher une page spécifique
        function showPage(pageId) {
            // Masquer toutes les pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Désactiver tous les liens de menu
            document.querySelectorAll('.menu-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // Afficher la page sélectionnée
            document.getElementById(`${pageId}-page`).classList.add('active');
            
            // Activer le lien de menu correspondant
            document.querySelector(`.menu-link[data-page="${pageId}"]`).classList.add('active');
            
            // Initialiser des composants spécifiques si nécessaire
            if (pageId === 'points-interet') {
                generatePointsInteret();
            }
            
            if (pageId === 'carte') {
                initMap();
            }
            
            if (pageId === 'hotels') {
                generateHotelServices();
            }
            
            if (pageId === 'convertisseur') {
                updateCurrencyDisplay();
            }
        }

        // Fonction pour ouvrir le menu
        function openMenu() {
            document.getElementById('nav-menu').classList.add('active');
        }

        // Fonction pour fermer le menu
        function closeMenu() {
            document.getElementById('nav-menu').classList.remove('active');
        }

        // Fonction pour afficher les détails d'un jour spécifique
        function showDayDetails(index) {
            currentDayIndex = index;
            const jour = voyageData.jours[index];
            const dayDetails = document.getElementById('day-details');
            
            let html = `
                <div class="day-header">
                    <div class="date">${formatDate(jour.date)}</div>
                    <div class="location">
                        <span class="country-badge ${jour.pays === 'Japon' ? 'japan-badge' : 'philippines-badge'}">${jour.pays}</span>
                        <a href="${getDirectionsLink(jour.location)}" target="_blank" title="Voir l'itinéraire vers ${jour.lieu}">
                            <span class="map-icon">📍</span> ${jour.lieu}
                        </a>
                    </div>
                </div>
                <div class="activities">
            `;
            
            // Ajouter les activités
            jour.activites.forEach(activite => {
                const mapsLink = activite.location ? 
                    `<a href="${getDirectionsLink(activite.location)}" target="_blank" title="Voir l'itinéraire vers ${activite.title}" class="place-link">📌 Itinéraire</a>` : '';
                
                html += `
                    <div class="activity">
                        <div class="time">${formatTime(activite.time)}</div>
                        <div class="activity-details">
                            <div class="activity-title">${activite.title}</div>
                            <div class="activity-desc">${activite.description} ${mapsLink}</div>
                        </div>
                    </div>
                `;
            });
            
            html += `</div>`;
            
            // Ajouter l'information sur l'hôtel
            if (jour.hotel && jour.hotel !== "N/A") {
                const hotel = voyageData.hotels.find(h => h.nom === jour.hotel);
                const hotelLocation = hotel ? hotel.location : jour.location;
                const hotelLink = hotelLocation ? 
                    `<a href="${getDirectionsLink(hotelLocation)}" target="_blank" title="Voir l'itinéraire vers ${jour.hotel}" class="place-link">📌 Itinéraire</a>` : '';
                
                html += `
                    <div class="hotel-info">
                        <div class="hotel-name">Hébergement : ${jour.hotel} ${hotelLink}</div>
                        ${hotel && hotel.typeChambre ? `<div class="room-type">${hotel.typeChambre}</div>` : ''}
                    </div>
                `;
            }
            
            // Ajouter les points d'intérêt à proximité
            if (jour.pointsInteret && jour.pointsInteret.length > 0) {
                html += `
                    <div class="nearby-places">
                        <div class="nearby-title">
                            📍 Points d'intérêt à proximité de ${jour.lieu}
                        </div>
                        <div class="places-grid">
                `;
                
                jour.pointsInteret.forEach(place => {
                    const plannedBadge = place.planned ? '<span class="planned-badge">Certain</span>' : '<span class="optional-badge">Option</span>';
                    const placeLink = place.location ? 
                        `<a href="${getDirectionsLink(place.location)}" target="_blank" title="Voir l'itinéraire vers ${place.nom}" class="place-link">📌 Itinéraire</a>` : '';
                    
                    html += `
                        <div class="place-card">
                            <div class="place-name">
                                ${place.nom} ${plannedBadge}
                            </div>
                            <div class="place-desc">${place.description} ${placeLink}</div>
                        </div>
                    `;
                });
                
                html += `
                        </div>
                    </div>
                `;
            }
            
            dayDetails.innerHTML = html;
            
            // Mettre à jour l'état des flèches de navigation
            updateNavigationArrows();
        }

        // Fonction pour mettre à jour l'état des flèches de navigation
        function updateNavigationArrows() {
            const prevArrow = document.getElementById('prev-day');
            const nextArrow = document.getElementById('next-day');
            
            // Désactiver la flèche précédente si on est sur le premier jour
            if (currentDayIndex <= 0) {
                prevArrow.classList.add('disabled');
                prevArrow.disabled = true;
            } else {
                prevArrow.classList.remove('disabled');
                prevArrow.disabled = false;
            }
            
            // Désactiver la flèche suivante si on est sur le dernier jour
            if (currentDayIndex >= voyageData.jours.length - 1) {
                nextArrow.classList.add('disabled');
                nextArrow.disabled = true;
            } else {
                nextArrow.classList.remove('disabled');
                nextArrow.disabled = false;
            }
        }

        // Fonction pour générer la section Points d'Intérêt
        function generatePointsInteret(villeSelectionnee = 'all') {
            const pointsInteretList = document.getElementById('points-interet-list');
            let html = '';
            
            // Grouper les points d'intérêt par ville
            const villes = {};
            voyageData.jours.forEach(jour => {
                if (!villes[jour.lieu]) {
                    villes[jour.lieu] = {
                        pays: jour.pays,
                        location: jour.location,
                        pointsInteret: []
                    };
                }
                
                // Éviter les doublons
                jour.pointsInteret.forEach(place => {
                    if (!villes[jour.lieu].pointsInteret.some(p => p.nom === place.nom)) {
                        villes[jour.lieu].pointsInteret.push(place);
                    }
                });
            });
            
            // Générer le HTML pour chaque ville
            for (const [ville, data] of Object.entries(villes)) {
                // Filtrer par ville sélectionnée
                if (villeSelectionnee !== 'all' && ville !== villeSelectionnee) {
                    continue;
                }
                
                if (data.pointsInteret.length > 0) {
                    html += `
                        <div class="day-details" style="margin-bottom: 2rem;">
                            <div class="day-header">
                                <div class="date">
                                    <a href="${getDirectionsLink(data.location)}" target="_blank" title="Voir l'itinéraire vers ${ville}">
                                        ${ville}
                                    </a>
                                </div>
                                <div class="location">
                                    <span class="country-badge ${data.pays === 'Japon' ? 'japan-badge' : 'philippines-badge'}">${data.pays}</span>
                                </div>
                            </div>
                            <div class="places-grid">
                    `;
                    
                    data.pointsInteret.forEach(place => {
                        const plannedBadge = place.planned ? '<span class="planned-badge">Certain</span>' : '<span class="optional-badge">Option</span>';
                        const placeLink = place.location ? 
                            `<a href="${getDirectionsLink(place.location)}" target="_blank" title="Voir l'itinéraire vers ${place.nom}" class="place-link">📌 Itinéraire</a>` : '';
                        
                        html += `
                            <div class="place-card">
                                <div class="place-name">
                                    ${place.nom} ${plannedBadge}
                                </div>
                                <div class="place-desc">${place.description} ${placeLink}</div>
                            </div>
                        `;
                    });
                    
                    html += `
                            </div>
                        </div>
                    `;
                }
            }
            
            if (html === '') {
                html = '<p style="text-align: center; padding: 2rem; color: #666;">Aucun point d\'intérêt trouvé pour cette ville.</p>';
            }
            
            pointsInteretList.innerHTML = html;
        }

        // Fonction pour initialiser la carte
        function initMap() {
            // Initialiser la carte Leaflet
            map = L.map('map').setView([25, 135], 4); // Centré sur une position médiane
            
            // Ajouter plusieurs types de fonds de carte
            const baseLayers = {
                "OpenStreetMap": L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '© OpenStreetMap contributors'
                }),
                "Satellite": L.tileLayer('https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}', {
                    attribution: '© Google Satellite',
                    subdomains: ['mt0','mt1','mt2','mt3']
                })
            };
            
            baseLayers["OpenStreetMap"].addTo(map);
            
            // Ajouter le contrôle des layers
            L.control.layers(baseLayers).addTo(map);
            
            updateMapLayer();
        }

        // Fonction pour mettre à jour les couches de la carte avec géocodage
        async function updateMapLayer() {
            // Supprimer tous les marqueurs existants
            markers.forEach(marker => map.removeLayer(marker));
            markers = [];
            
            // Collecter tous les points d'intérêt
            const allPointsInteret = [];
            voyageData.jours.forEach(jour => {
                jour.pointsInteret.forEach(point => {
                    allPointsInteret.push(point);
                });
            });
            
            // Afficher les hôtels
            if (currentLayer === 'hotels' || currentLayer === 'all') {
                for (const hotel of voyageData.hotels) {
                    if (hotel.location) {
                        const coords = await geocodeLocation(hotel.location);
                        if (coords) {
                            const marker = L.marker([coords.lat, coords.lng], {
                                icon: L.divIcon({
                                    className: 'hotel-marker',
                                    html: '🏨',
                                    iconSize: [25, 25]
                                })
                            })
                            .addTo(map)
                            .bindPopup(`
                                <b>${hotel.nom}</b><br>
                                ${hotel.ville}, ${hotel.pays}<br>
                                ${hotel.typeChambre}<br>
                                Check-in: ${hotel.checkIn} | Check-out: ${hotel.checkOut}
                                <br><a href="${getDirectionsLink(hotel.location)}" target="_blank">📌 Itinéraire</a>
                            `);
                            markers.push(marker);
                        }
                    }
                }
            }
            
            // Afficher les points d'intérêt certains
            if (currentLayer === 'planned' || currentLayer === 'all') {
                for (const point of allPointsInteret) {
                    if (point.planned && point.location) {
                        const coords = await geocodeLocation(point.location);
                        if (coords) {
                            const marker = L.marker([coords.lat, coords.lng], {
                                icon: L.divIcon({
                                    className: 'planned-marker',
                                    html: '✅',
                                    iconSize: [20, 20]
                                })
                            })
                            .addTo(map)
                            .bindPopup(`
                                <b>${point.nom}</b><br>
                                ${point.description}<br>
                                <em>Point d'intérêt certain</em>
                                <br><a href="${getDirectionsLink(point.location)}" target="_blank">📌 Itinéraire</a>
                            `);
                            markers.push(marker);
                        }
                    }
                }
            }
            
            // Afficher les options temps libre
            if (currentLayer === 'optional' || currentLayer === 'all') {
                for (const point of allPointsInteret) {
                    if (!point.planned && point.location) {
                        const coords = await geocodeLocation(point.location);
                        if (coords) {
                            const marker = L.marker([coords.lat, coords.lng], {
                                icon: L.divIcon({
                                    className: 'optional-marker',
                                    html: '❓',
                                    iconSize: [20, 20]
                                })
                            })
                            .addTo(map)
                            .bindPopup(`
                                <b>${point.nom}</b><br>
                                ${point.description}<br>
                                <em>Option pour temps libre</em>
                                <br><a href="${getDirectionsLink(point.location)}" target="_blank">📌 Itinéraire</a>
                            `);
                            markers.push(marker);
                        }
                    }
                }
            }
        }

        // Fonction pour générer le tableau des services hôteliers
        function generateHotelServices() {
            const hotelServicesBody = document.getElementById('hotel-services-body');
            let html = '';
            
            voyageData.hotels.forEach(hotel => {
                const mapsLink = hotel.location ? 
                    `<a href="${getDirectionsLink(hotel.location)}" target="_blank" title="Voir l'itinéraire vers ${hotel.nom}" class="place-link">📌 Itinéraire</a>` : '';
                
                // Ajouter une classe spéciale pour l'hôtel de Kyoto non choisi
                const isUndecided = hotel.nom.includes("à déterminer");
                const rowClass = isUndecided ? 'undecided-hotel' : '';
                
                html += `
                    <tr class="${rowClass}">
                        <td>
                            <strong>${hotel.nom}</strong>
                            ${isUndecided ? '<span class="warning-badge">À choisir</span>' : ''}
                            <br>${mapsLink}
                        </td>
                        <td>${hotel.ville}, ${hotel.pays}</td>
                        <td>${hotel.typeChambre}</td>
                        <td>
                            ${hotel.services.map(service => `<span class="service-badge">${service}</span>`).join('')}
                        </td>
                        <td>
                            ${hotel.equipements.map(equipement => `<span class="service-badge">${equipement}</span>`).join('')}
                        </td>
                        <td>${hotel.checkIn} / ${hotel.checkOut}</td>
                    </tr>
                `;
            });
            
            hotelServicesBody.innerHTML = html;
        }

        // Fonction pour initialiser le convertisseur de devises
        function initializeCurrencyConverter() {
            // Mettre à jour l'affichage des taux
            updateCurrencyDisplay();
            
            // Ajouter les écouteurs d'événements pour les champs de saisie
            document.getElementById('converter-amount').addEventListener('input', convertCurrency);
            document.getElementById('converter-from').addEventListener('change', convertCurrency);
            document.getElementById('converter-to').addEventListener('change', convertCurrency);
            
            // Ajouter l'écouteur pour le bouton d'échange
            document.getElementById('converter-swap').addEventListener('click', swapCurrencies);
            
            // Ajouter l'écouteur pour le bouton de mise à jour
            document.getElementById('update-rates').addEventListener('click', fetchLatestRates);
            
            // Convertir la valeur initiale
            convertCurrency();
        }

        // Fonction pour convertir les devises
        function convertCurrency() {
            const amount = parseFloat(document.getElementById('converter-amount').value) || 0;
            const from = document.getElementById('converter-from').value;
            const to = document.getElementById('converter-to').value;
            
            if (from === to) {
                document.getElementById('converter-result-amount').textContent = amount.toFixed(2);
                return;
            }
            
            let rate;
            if (from === 'EUR' && to === 'JPY') {
                rate = currencyData.rates.EUR_JPY;
            } else if (from === 'EUR' && to === 'PHP') {
                rate = currencyData.rates.EUR_PHP;
            } else if (from === 'JPY' && to === 'EUR') {
                rate = 1 / currencyData.rates.EUR_JPY;
            } else if (from === 'PHP' && to === 'EUR') {
                rate = 1 / currencyData.rates.EUR_PHP;
            } else if (from === 'JPY' && to === 'PHP') {
                rate = currencyData.rates.EUR_PHP / currencyData.rates.EUR_JPY;
            } else if (from === 'PHP' && to === 'JPY') {
                rate = currencyData.rates.EUR_JPY / currencyData.rates.EUR_PHP;
            }
            
            const result = amount * rate;
            document.getElementById('converter-result-amount').textContent = result.toFixed(2);
        }

        // Fonction pour échanger les devises
        function swapCurrencies() {
            const from = document.getElementById('converter-from');
            const to = document.getElementById('converter-to');
            
            const temp = from.value;
            from.value = to.value;
            to.value = temp;
            
            convertCurrency();
        }

        // Fonction pour mettre à jour l'affichage des taux
        function updateCurrencyDisplay() {
            document.getElementById('rate-eur-jpy').textContent = currencyData.rates.EUR_JPY.toFixed(2);
            document.getElementById('rate-eur-php').textContent = currencyData.rates.EUR_PHP.toFixed(2);
            document.getElementById('last-update').textContent = currencyData.lastUpdate;
        }

        // Fonction pour récupérer les derniers taux de change (simulé)
        function fetchLatestRates() {
            // En situation réelle, on appellerait une API ici
            // Pour l'exemple, on simule une mise à jour avec de petites variations
            
            const variation = 0.02; // 2% de variation
            
            currencyData.rates.EUR_JPY *= (1 + (Math.random() * variation * 2 - variation));
            currencyData.rates.EUR_PHP *= (1 + (Math.random() * variation * 2 - variation));
            
            currencyData.rates.EUR_JPY = parseFloat(currencyData.rates.EUR_JPY.toFixed(2));
            currencyData.rates.EUR_PHP = parseFloat(currencyData.rates.EUR_PHP.toFixed(2));
            
            currencyData.lastUpdate = new Date().toLocaleDateString('fr-FR');
            
            updateCurrencyDisplay();
            convertCurrency();
            
            // Afficher un message de confirmation
            alert('Taux de change actualisés avec succès!');
        }

        // Fonctions pour la sauvegarde/chargement de la sélection du jour
        function saveDaySelection(index) {
            localStorage.setItem('lastSelectedDay', index);
            currentDayIndex = index;
            updateNavigationArrows();
        }

        function loadDaySelection() {
            const lastIndex = localStorage.getItem('lastSelectedDay');
            if (lastIndex !== null) {
                // Si une sélection existe dans le localStorage, l'utiliser
                const dayDropdown = document.getElementById('day-dropdown');
                dayDropdown.value = lastIndex;
                if (parseInt(lastIndex) >= 0) {
                    showDayDetails(parseInt(lastIndex));
                }
            } else {
                // Sinon, trouver le jour le plus proche de la date actuelle
                const closestIndex = findClosestDayIndex();
                const dayDropdown = document.getElementById('day-dropdown');
                dayDropdown.value = closestIndex;
                saveDaySelection(closestIndex);
                showDayDetails(closestIndex);
            }
        }
    </script>
</body>
</html>