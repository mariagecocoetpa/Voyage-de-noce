<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planning du Voyage de Noce - Japon & Tha√Ølande</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #fafafa;
            color: #333;
            line-height: 1.6;
        }
        
        header {
            background: white;
            padding: 2rem 1rem;
            text-align: center;
            border-bottom: 1px solid #e0e0e0;
        }
        
        h1 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: #ff6b9d;
        }
        
        .subtitle {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.5rem;
        }
        
        .countdown {
            font-size: 1.1rem;
            font-weight: 600;
            color: #ff6b9d;
            background: #fff5f8;
            padding: 0.75rem 1.5rem;
            border-radius: 20px;
            display: inline-block;
            margin-top: 0.5rem;
            animation: pulse 2s infinite;
        }
        
        .countdown-details {
            font-size: 0.9rem;
            color: #666;
            margin-top: 0.25rem;
        }
        
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        
        .tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .tab {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 0.9rem;
            color: #666;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }
        
        .tab.active {
            color: #ff6b9d;
            border-bottom-color: #ff6b9d;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .day-dropdown {
            width: 100%;
            padding: 0.75rem;
            font-size: 0.95rem;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            background: white;
            margin-bottom: 2rem;
            cursor: pointer;
        }
        
        .day-dropdown.today {
            border-color: #ff6b9d;
            background: #fff5f8;
            box-shadow: 0 0 0 3px rgba(255, 107, 157, 0.1);
        }
        
        .day-dropdown:focus {
            outline: none;
            border-color: #ff6b9d;
        }
        
        .city-dropdown {
            width: 100%;
            padding: 0.75rem;
            font-size: 0.95rem;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            background: white;
            margin-bottom: 1.5rem;
            cursor: pointer;
        }
        
        .city-dropdown:focus {
            outline: none;
            border-color: #ff6b9d;
        }
        
        .day-details {
            background: white;
            border-radius: 4px;
            padding: 1.5rem;
            border: 1px solid #e0e0e0;
        }
        
        .day-header {
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .date {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: #ff6b9d;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .today-badge {
            background: linear-gradient(135deg, #ff6b9d, #ffa07a);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.8;
            }
        }
        
        .location {
            font-size: 0.9rem;
            color: #666;
        }
        
        .location a {
            color: inherit;
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .location a:hover {
            color: #ff6b9d;
        }
        
        .activity {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
            padding: 0.75rem;
            border-radius: 4px;
            transition: all 0.2s;
        }
        
        .activity.clickable {
            cursor: pointer;
        }
        
        .activity.clickable:hover {
            background: #fff5f8;
            transform: translateX(4px);
        }
        
        .time {
            min-width: 60px;
            color: #999;
            flex-shrink: 0;
        }
        
        .activity-details {
            flex: 1;
        }
        
        .activity-title {
            font-weight: 500;
            margin-bottom: 0.25rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .activity-title .map-link {
            font-size: 0.85rem;
            opacity: 0;
            transition: opacity 0.2s;
        }
        
        .activity.clickable:hover .map-link {
            opacity: 1;
        }
        
        .activity-desc {
            color: #666;
            font-size: 0.85rem;
        }
        
        .hotel-info {
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid #f0f0f0;
            font-size: 0.9rem;
            color: #666;
        }
        
        .hotel-info a {
            color: #ff6b9d;
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .hotel-info a:hover {
            color: #ffa07a;
        }
        
        .nearby-places {
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid #f0f0f0;
        }
        
        .nearby-title {
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 1rem;
        }
        
        .places-grid {
            display: grid;
            gap: 1rem;
        }
        
        .place-card {
            padding: 1rem;
            background: white;
            border-radius: 8px;
            border: 1px solid #f0f0f0;
            transition: all 0.2s;
        }
        
        .place-card:hover {
            border-color: #ff6b9d;
            box-shadow: 0 4px 12px rgba(255, 107, 157, 0.1);
            transform: translateY(-2px);
        }
        
        .place-name {
            font-weight: 500;
            margin-bottom: 0.25rem;
            font-size: 0.9rem;
        }
        
        .place-name a {
            color: #333;
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .place-name a:hover {
            color: #ff6b9d;
        }
        
        .place-desc {
            font-size: 0.85rem;
            color: #666;
        }
        
        .country-badge {
            display: inline-block;
            font-size: 0.75rem;
            color: #999;
            margin-right: 0.5rem;
        }
        
        .japan-badge {
            color: #ff6b9d;
        }
        
        .thailand-badge {
            color: #ffa07a;
        }
        
        .city-details {
            display: none;
            margin-top: 1rem;
        }
        
        .city-details.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            color: #999;
            font-size: 0.9rem;
        }
        
        #map-container {
            height: 500px;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid #e0e0e0;
            margin-bottom: 1rem;
        }
        
        #map {
            height: 100%;
            width: 100%;
        }
        
        .map-legend {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
            padding: 0.75rem;
            background: white;
            border-radius: 4px;
            border: 1px solid #e0e0e0;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
        }
        
        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        .legend-hotel {
            background-color: #ff6b9d;
        }
        
        .legend-activity {
            background-color: #4a90e2;
        }
        
        .legend-interest {
            background-color: #50c878;
        }
        
        @media (max-width: 768px) {
            .day-header {
                flex-direction: column;
            }
            
            .activity {
                flex-direction: column;
                gap: 0.25rem;
            }
            
            .time {
                min-width: auto;
            }
            
            #map-container {
                height: 400px;
            }
            
            .countdown {
                font-size: 1rem;
                padding: 0.5rem 1rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Voyage de noce</h1>
        <p class="subtitle">21 F√©vrier - 14 Mars 2026</p>
        <div class="countdown" id="countdown">
            Chargement du d√©compte...
        </div>
        <div class="countdown-details" id="countdown-details">
            D√©part de l'avion depuis Paris
        </div>
    </header>
    
    <div class="container">
        <div class="tabs">
            <button class="tab active" data-tab="planning">Planning</button>
            <button class="tab" data-tab="points-interet">Points d'int√©r√™t</button>
            <button class="tab" data-tab="carte">Carte</button>
        </div>
        
        <div class="tab-content active" id="planning-content">
            <select class="day-dropdown" id="day-dropdown">
                <option value="">S√©lectionnez un jour...</option>
            </select>
            
            <div class="day-details" id="day-details">
                <div class="empty-state">
                    S√©lectionnez un jour pour voir les d√©tails
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="points-interet-content">
            <select class="city-dropdown" id="city-dropdown">
                <option value="">S√©lectionnez une ville...</option>
            </select>
            <div id="points-interet-list"></div>
        </div>
        
        <div class="tab-content" id="carte-content">
            <div class="map-legend">
                <div class="legend-item">
                    <div class="legend-color legend-hotel"></div>
                    <span>H√¥tels</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color legend-activity"></div>
                    <span>Activit√©s</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color legend-interest"></div>
                    <span>Points d'int√©r√™t</span>
                </div>
            </div>
            <div id="map-container">
                <div id="map"></div>
            </div>
            <p style="text-align: center; color: #666; font-size: 0.9rem;">
                Carte interactive montrant tous les lieux du voyage
            </p>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        const voyageData = {
            jours: [
                {
                    date: "2026-02-21",
                    lieu: "Tokyo",
                    pays: "Japon",
                    coordonnees: "35.6762,139.6503",
                    hotel: "The B Ginza",
                    activites: [
                        { time: "19:45", title: "Arriv√©e √† l'a√©roport de Haneda", description: "Vol depuis Paris via Istanbul", lieu: "A√©roport de Tokyo Haneda", coordonnees: "35.5494,139.7798" },
                        { time: "20:30", title: "Transfert vers l'h√¥tel", description: "Trajet en taxi vers The B Ginza", lieu: "The B Ginza", coordonnees: "35.6715,139.7630" },
                        { time: "21:15", title: "Check-in et installation", description: "Enregistrement √† l'h√¥tel", lieu: "The B Ginza", coordonnees: "35.6715,139.7630" },
                        { time: "21:30", title: "D√Æner l√©ger", description: "Repas dans un izakaya ou konbini" },
                        { time: "Nuit", title: "Repos", description: "Premi√®re nuit √† Tokyo" }
                    ],
                    pointsInteret: [
                        { nom: "Ginza Six", description: "Centre commercial luxueux", coordonnees: "35.6715,139.7630" },
                        { nom: "Kabukiza Theatre", description: "Th√©√¢tre traditionnel de kabuki", coordonnees: "35.6694,139.7676" },
                        { nom: "Tsukiji Outer Market", description: "March√© alimentaire c√©l√®bre", coordonnees: "35.6655,139.7704" }
                    ]
                },
                // ... (le reste des donn√©es du voyage reste inchang√©)
                {
                    date: "2026-03-14",
                    lieu: "Vol retour",
                    pays: "International",
                    coordonnees: "",
                    hotel: "N/A",
                    activites: [
                        { time: "‚Äî", title: "Transfert √† l'a√©roport", description: "Vers l'a√©roport de Phuket" },
                        { time: "‚Äî", title: "Vol retour Paris", description: "D√©collage depuis Phuket" }
                    ],
                    pointsInteret: []
                }
            ]
        };

        let map;
        let mapMarkers = [];
        let countdownInterval;

        // Fonction pour calculer le d√©compte pr√©cis
        function updateCountdown() {
            // Date et heure de d√©part de l'avion depuis Paris (21 f√©vrier 2026, 19:45 heure de Tokyo)
            // Mais le vol part de Paris, donc nous devons calculer l'heure de d√©part de Paris
            // Supposons un vol de 13h depuis Paris avec escale √† Istanbul
            // Donc d√©part de Paris vers 06:45 heure de Paris le 21 f√©vrier 2026
            const departParis = new Date('2026-02-20T18:50:00+01:00'); // Heure de Paris (UTC+1)
            
            const now = new Date();
            
            const diffTime = departParis - now;
            
            const countdownElement = document.getElementById('countdown');
            const detailsElement = document.getElementById('countdown-details');
            
            if (diffTime <= 0) {
                countdownElement.textContent = "L'avion a d√©coll√© ! Bon voyage !";
                detailsElement.textContent = "Vol Paris ‚Üí Tokyo en cours";
                clearInterval(countdownInterval);
                return;
            }
            
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            const diffHours = Math.floor((diffTime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const diffMinutes = Math.floor((diffTime % (1000 * 60 * 60)) / (1000 * 60));
            const diffSeconds = Math.floor((diffTime % (1000 * 60)) / 1000);
            
            if (diffDays > 0) {
                countdownElement.innerHTML = `
                    <div>${diffDays} jour${diffDays > 1 ? 's' : ''}</div>
                    <div>${diffHours}h ${diffMinutes}m ${diffSeconds}s</div>
                `;
                detailsElement.textContent = `D√©part de Paris √† 06:45 (vol Paris ‚Üí Tokyo)`;
            } else if (diffHours > 0) {
                countdownElement.innerHTML = `
                    <div>${diffHours}h ${diffMinutes}m ${diffSeconds}s</div>
                `;
                detailsElement.textContent = `D√©part de Paris √† 06:45 (vol Paris ‚Üí Tokyo)`;
            } else {
                countdownElement.innerHTML = `
                    <div>${diffMinutes}m ${diffSeconds}s</div>
                `;
                detailsElement.textContent = `D√©part de Paris √† 06:45 (vol Paris ‚Üí Tokyo)`;
            }
        }

        function formatDate(dateStr) {
            const date = new Date(dateStr);
            const options = { weekday: 'long', day: 'numeric', month: 'long' };
            return date.toLocaleDateString('fr-FR', options);
        }

        function getMapsLink(coordinates, placeName) {
            if (!coordinates) return "#";
            return `https://www.google.com/maps/search/?api=1&query=${coordinates}&query_place=${encodeURIComponent(placeName)}`;
        }

        function isMeal(activityTitle) {
            const mealKeywords = ['petit-d√©jeuner', 'd√©jeuner', 'd√Æner', 'repas', 'd√Æner l√©ger', 'diner', 'd√©jeuner', 'd√Æner', 'diner l√©ger', 'repas l√©ger', 'd√©jeuner traditionnel', 'd√©jeuner local', 'd√Æner gastronomique', 'd√Æner izakaya', 'd√Æner tranquille', 'd√Æner romantique', 'd√Æner d\'adieu'];
            const lowerTitle = activityTitle.toLowerCase();
            return mealKeywords.some(keyword => lowerTitle.includes(keyword));
        }

        function isLeisureActivity(activityTitle) {
            const leisureKeywords = ['temps libre', 'd√©tente', 'repos', 'fin de journ√©e', 'soir√©e', 'shopping', 'massage', 'baignade', 'coucher de soleil'];
            const lowerTitle = activityTitle.toLowerCase();
            return leisureKeywords.some(keyword => lowerTitle.includes(keyword));
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Initialiser le d√©compte
            updateCountdown();
            countdownInterval = setInterval(updateCountdown, 1000);
            
            const dayDropdown = document.getElementById('day-dropdown');
            
            voyageData.jours.forEach((jour, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = `${formatDate(jour.date)} - ${jour.lieu}`;
                dayDropdown.appendChild(option);
            });

            // V√©rifier si la date d'aujourd'hui correspond √† un jour du voyage
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            const todayIndex = voyageData.jours.findIndex(jour => {
                const jourDate = new Date(jour.date);
                jourDate.setHours(0, 0, 0, 0);
                return jourDate.getTime() === today.getTime();
            });
            
            if (todayIndex !== -1) {
                dayDropdown.value = todayIndex;
                dayDropdown.classList.add('today');
                showDayDetails(todayIndex);
                
                // Scroll vers le haut pour voir le contenu
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            dayDropdown.addEventListener('change', function() {
                const index = parseInt(this.value);
                if (!isNaN(index)) {
                    showDayDetails(index);
                    // Retirer la classe today lors d'une s√©lection manuelle
                    this.classList.remove('today');
                } else {
                    document.getElementById('day-details').innerHTML = `
                        <div class="empty-state">S√©lectionnez un jour pour voir les d√©tails</div>
                    `;
                }
            });

            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    const tabId = this.dataset.tab;
                    document.getElementById(`${tabId}-content`).classList.add('active');
                    
                    if (tabId === 'points-interet') {
                        initializePointsInteret();
                    } else if (tabId === 'carte') {
                        initializeMap();
                    }
                });
            });
        });

        // Le reste du code JavaScript reste inchang√©...
        function initializePointsInteret() {
            const cityDropdown = document.getElementById('city-dropdown');
            
            if (cityDropdown.options.length > 1) return;
            
            const villes = {};
            voyageData.jours.forEach(jour => {
                if (!villes[jour.lieu]) {
                    villes[jour.lieu] = {
                        pays: jour.pays,
                        coordonnees: jour.coordonnees,
                        pointsInteret: []
                    };
                }
                
                jour.pointsInteret.forEach(place => {
                    if (!villes[jour.lieu].pointsInteret.some(p => p.nom === place.nom)) {
                        villes[jour.lieu].pointsInteret.push(place);
                    }
                });
            });
            
            Object.keys(villes).forEach(ville => {
                if (villes[ville].pointsInteret.length > 0) {
                    const option = document.createElement('option');
                    option.value = ville;
                    option.textContent = `${ville} (${villes[ville].pays})`;
                    cityDropdown.appendChild(option);
                }
            });
            
            cityDropdown.addEventListener('change', function() {
                const ville = this.value;
                if (ville) {
                    showCityDetails(ville, villes[ville]);
                } else {
                    document.getElementById('points-interet-list').innerHTML = `
                        <div class="empty-state">S√©lectionnez une ville pour voir ses points d'int√©r√™t</div>
                    `;
                }
            });
        }

        function initializeMap() {
            if (map) {
                // La carte est d√©j√† initialis√©e, on la r√©affiche simplement
                setTimeout(() => {
                    map.invalidateSize();
                }, 100);
                return;
            }
            
            // Initialiser la carte Leaflet
            map = L.map('map').setView([35.6762, 139.6503], 4); // Centr√© sur Tokyo par d√©faut
            
            // Ajouter la couche de tuiles OpenStreetMap
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);
            
            // Collecter tous les points √† afficher
            const allPoints = [];
            
            voyageData.jours.forEach(jour => {
                // Ajouter l'h√¥tel
                if (jour.hotel && jour.hotel !== "N/A" && jour.hotel !== "√Ä d√©terminer" && jour.coordonnees) {
                    const [lat, lng] = jour.coordonnees.split(',').map(coord => parseFloat(coord.trim()));
                    allPoints.push({
                        lat,
                        lng,
                        title: jour.hotel,
                        description: `H√¥tel √† ${jour.lieu} (${formatDate(jour.date)})`,
                        type: 'hotel',
                        date: jour.date
                    });
                }
                
                // Ajouter les activit√©s (sauf les repas et les activit√©s de loisir non sp√©cifiques)
                jour.activites.forEach(activite => {
                    if (activite.coordonnees && !isMeal(activite.title) && !isLeisureActivity(activite.title)) {
                        const [lat, lng] = activite.coordonnees.split(',').map(coord => parseFloat(coord.trim()));
                        allPoints.push({
                            lat,
                            lng,
                            title: activite.title,
                            description: `${activite.description} (${activite.time})`,
                            type: 'activity',
                            date: jour.date
                        });
                    }
                });
                
                // Ajouter les points d'int√©r√™t
                jour.pointsInteret.forEach(point => {
                    if (point.coordonnees) {
                        const [lat, lng] = point.coordonnees.split(',').map(coord => parseFloat(coord.trim()));
                        allPoints.push({
                            lat,
                            lng,
                            title: point.nom,
                            description: point.description,
                            type: 'interest',
                            date: jour.date
                        });
                    }
                });
            });
            
            // Cr√©er des marqueurs pour chaque point
            allPoints.forEach(point => {
                let markerColor;
                let iconHtml;
                
                switch(point.type) {
                    case 'hotel':
                        markerColor = '#ff6b9d';
                        iconHtml = 'üè®';
                        break;
                    case 'activity':
                        markerColor = '#4a90e2';
                        iconHtml = 'üìç';
                        break;
                    case 'interest':
                        markerColor = '#50c878';
                        iconHtml = '‚≠ê';
                        break;
                }
                
                // Cr√©er un marqueur personnalis√©
                const customIcon = L.divIcon({
                    html: `<div style="background-color: ${markerColor}; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 14px; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.2);">${iconHtml}</div>`,
                    className: 'custom-marker',
                    iconSize: [30, 30],
                    iconAnchor: [15, 15]
                });
                
                const marker = L.marker([point.lat, point.lng], { icon: customIcon })
                    .addTo(map)
                    .bindPopup(`
                        <div style="min-width: 200px;">
                            <h3 style="margin: 0 0 8px 0; color: #333;">${point.title}</h3>
                            <p style="margin: 0 0 8px 0; color: #666;">${point.description}</p>
                            <p style="margin: 0 0 8px 0; font-size: 0.85rem; color: #999;">${formatDate(point.date)}</p>
                            <a href="${getMapsLink(`${point.lat},${point.lng}`, point.title)}" target="_blank" style="color: #ff6b9d; text-decoration: none; font-weight: 500;">Voir sur Google Maps</a>
                        </div>
                    `);
                
                mapMarkers.push(marker);
            });
            
            // Ajuster la vue de la carte pour afficher tous les marqueurs
            if (allPoints.length > 0) {
                const group = new L.featureGroup(mapMarkers);
                map.fitBounds(group.getBounds().pad(0.1));
            }
        }

        function showDayDetails(index) {
            const jour = voyageData.jours[index];
            const dayDetails = document.getElementById('day-details');
            
            let html = `
                <div class="day-header">
                    <div class="date">${formatDate(jour.date)}</div>
                    <div class="location">
                        <span class="country-badge">${jour.pays}</span>
                        <a href="${getMapsLink(jour.coordonnees, jour.lieu)}" target="_blank">${jour.lieu}</a>
                    </div>
                </div>
                <div class="activities">
            `;
            
            jour.activites.forEach(activite => {
                const hasLocation = activite.lieu && activite.coordonnees;
                const isMealActivity = isMeal(activite.title);
                const isLeisure = isLeisureActivity(activite.title);
                const isClickable = hasLocation && !isMealActivity && !isLeisure;
                
                html += `
                    <div class="activity ${isClickable ? 'clickable' : ''}" ${isClickable ? `onclick="window.open('${getMapsLink(activite.coordonnees, activite.lieu)}', '_blank')"` : ''}>
                        <div class="time">${activite.time}</div>
                        <div class="activity-details">
                            <div class="activity-title">
                                ${activite.title}
                                ${isClickable ? '<span class="map-link">üìç</span>' : ''}
                            </div>
                            <div class="activity-desc">${activite.description}</div>
                        </div>
                    </div>
                `;
            });
            
            html += `</div>`;
            
            if (jour.hotel && jour.hotel !== "N/A") {
                const hotelMapsLink = getMapsLink(jour.coordonnees, jour.hotel);
                html += `<div class="hotel-info">H√¥tel: <a href="${hotelMapsLink}" target="_blank">${jour.hotel}</a></div>`;
            }
            
            if (jour.pointsInteret && jour.pointsInteret.length > 0) {
                html += `
                    <div class="nearby-places">
                        <div class="nearby-title">Points d'int√©r√™t</div>
                        <div class="places-grid">
                `;
                
                jour.pointsInteret.forEach(place => {
                    html += `
                        <div class="place-card">
                            <div class="place-name">
                                <a href="${getMapsLink(place.coordonnees, place.nom)}" target="_blank">${place.nom}</a>
                            </div>
                            <div class="place-desc">${place.description}</div>
                        </div>
                    `;
                });
                
                html += `</div></div>`;
            }
            
            dayDetails.innerHTML = html;
        }

        function showCityDetails(ville, data) {
            const pointsInteretList = document.getElementById('points-interet-list');
            
            let html = `
                <div class="day-details city-details active">
                    <div class="day-header">
                        <div class="date">
                            <a href="${getMapsLink(data.coordonnees, ville)}" target="_blank">${ville}</a>
                        </div>
                        <div class="location">
                            <span class="country-badge ${data.pays === 'Japon' ? 'japan-badge' : 'thailand-badge'}">${data.pays}</span>
                        </div>
                    </div>
                    <div class="places-grid">
            `;
            
            data.pointsInteret.forEach(place => {
                html += `
                    <div class="place-card">
                        <div class="place-name">
                            <a href="${getMapsLink(place.coordonnees, place.nom)}" target="_blank">${place.nom}</a>
                        </div>
                        <div class="place-desc">${place.description}</div>
                    </div>
                `;
            });
            
            html += `</div></div>`;
            pointsInteretList.innerHTML = html;
        }
    </script>
</body>
</html>